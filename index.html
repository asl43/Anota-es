<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Meu Calend√°rio Organizador</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            background: rgba(255, 255, 255, 0.95);
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
            text-align: center;
        }

        .header h1 {
            color: #4a5568;
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        .main-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }

        .calendar-section {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }

        .events-section {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }

        .calendar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .nav-btn {
            background: #667eea;
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            transition: background 0.3s;
        }

        .nav-btn:hover {
            background: #5a67d8;
        }

        .month-year {
            font-size: 1.5rem;
            font-weight: bold;
            color: #4a5568;
        }

        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 1px;
            background: #e2e8f0;
            border-radius: 8px;
            overflow: hidden;
        }

        .calendar-day-header {
            background: #4a5568;
            color: white;
            padding: 10px;
            text-align: center;
            font-weight: bold;
        }

        .calendar-day {
            background: white;
            min-height: 50px;
            padding: 5px;
            cursor: pointer;
            transition: background 0.2s;
            position: relative;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-start;
        }

        .calendar-day:hover {
            background: #f7fafc;
        }

        .calendar-day.other-month {
            color: #a0aec0;
            background: #f8f9fa;
        }

        .calendar-day.selected {
            background: #667eea;
            color: white;
        }

        .calendar-day.has-event {
            background: #e6fffa;
            border: 2px solid #38b2ac;
        }

        .event-dot {
            width: 6px;
            height: 6px;
            background: #38b2ac;
            border-radius: 50%;
            margin-top: 2px;
        }

        .events-list {
            max-height: 400px;
            overflow-y: auto;
        }

        .event-item {
            background: #f7fafc;
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 8px;
            border-left: 4px solid #667eea;
            position: relative;
        }

        .event-date {
            font-weight: bold;
            color: #667eea;
            margin-bottom: 5px;
        }

        .event-title {
            font-size: 1.1rem;
            margin-bottom: 5px;
        }

        .event-time {
            color: #718096;
            font-size: 0.9rem;
            margin-bottom: 5px;
        }

        .event-notification {
            background: #e6fffa;
            color: #234e52;
            padding: 3px 8px;
            border-radius: 12px;
            font-size: 0.8rem;
            display: inline-block;
            margin-right: 5px;
        }

        .delete-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            background: #e53e3e;
            color: white;
            border: none;
            border-radius: 50%;
            width: 25px;
            height: 25px;
            cursor: pointer;
            font-size: 12px;
        }

        .form-section {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            margin-top: 20px;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            color: #4a5568;
        }

        .form-group input, .form-group select, .form-group textarea {
            width: 100%;
            padding: 10px;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s;
        }

        .form-group input:focus, .form-group select:focus, .form-group textarea:focus {
            outline: none;
            border-color: #667eea;
        }

        .checkbox-group {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .btn {
            background: #38a169;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            font-size: 16px;
            cursor: pointer;
            transition: background 0.3s;
        }

        .btn:hover {
            background: #2f855a;
        }

        .notification-types {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }

        .hidden {
            display: none;
        }

        .image-preview {
            margin-top: 10px;
            text-align: center;
        }

        .image-preview img {
            max-width: 200px;
            max-height: 150px;
            border-radius: 8px;
            border: 2px solid #e2e8f0;
        }

        .audio-preview {
            margin-top: 10px;
        }

        .audio-preview audio {
            width: 100%;
            border-radius: 8px;
        }

        .media-item {
            margin-top: 10px;
            padding: 10px;
            background: #f0f4f8;
            border-radius: 8px;
            position: relative;
        }

        .media-item img {
            max-width: 150px;
            max-height: 100px;
            border-radius: 6px;
            margin-right: 10px;
        }

        .media-item audio {
            width: 100%;
            margin-top: 5px;
        }

        .remove-media {
            position: absolute;
            top: 5px;
            right: 5px;
            background: #e53e3e;
            color: white;
            border: none;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            cursor: pointer;
            font-size: 10px;
        }

        .media-gallery {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 10px;
        }

        .media-thumbnail {
            position: relative;
            cursor: pointer;
        }

        .media-thumbnail img {
            width: 60px;
            height: 60px;
            object-fit: cover;
            border-radius: 6px;
            border: 2px solid #e2e8f0;
            transition: border-color 0.3s;
        }

        .media-thumbnail:hover img {
            border-color: #667eea;
        }

        .audio-icon {
            width: 60px;
            height: 60px;
            background: #667eea;
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 24px;
        }

        @media (max-width: 768px) {
            .main-content {
                grid-template-columns: 1fr;
            }
            
            .header h1 {
                font-size: 2rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üìÖ Meu Calend√°rio Organizador</h1>
            <p>Organize sua vida de forma inteligente</p>
        </div>

        <div class="main-content">
            <div class="calendar-section">
                <div class="calendar-header">
                    <button class="nav-btn" onclick="previousMonth()">‚Äπ</button>
                    <div class="month-year" id="monthYear"></div>
                    <button class="nav-btn" onclick="nextMonth()">‚Ä∫</button>
                </div>
                <div class="calendar-grid" id="calendarGrid"></div>
            </div>

            <div class="events-section">
                <h3>üìã Pr√≥ximos Eventos</h3>
                <div class="events-list" id="eventsList"></div>
            </div>
        </div>

        <div class="form-section">
            <h3>‚ûï Adicionar Novo Evento</h3>
            <form id="eventForm">
                <div class="form-group">
                    <label for="eventTitle">T√≠tulo do Evento:</label>
                    <input type="text" id="eventTitle" required>
                </div>

                <div class="form-group">
                    <label for="eventDate">Data:</label>
                    <input type="date" id="eventDate" required>
                </div>

                <div class="form-group">
                    <label for="eventTime">Hor√°rio:</label>
                    <input type="time" id="eventTime" required>
                </div>

                <div class="form-group">
                    <label for="eventDescription">Descri√ß√£o:</label>
                    <textarea id="eventDescription" rows="3"></textarea>
                </div>

                <div class="form-group">
                    <label for="eventImage">Adicionar Imagem:</label>
                    <input type="file" id="eventImage" accept="image/*" onchange="previewImage(event)">
                    <div id="imagePreview" class="image-preview hidden"></div>
                </div>

                <div class="form-group">
                    <label for="eventAudio">Adicionar √Åudio:</label>
                    <input type="file" id="eventAudio" accept="audio/*" onchange="previewAudio(event)">
                    <div id="audioPreview" class="audio-preview hidden"></div>
                </div>

                <div class="form-group">
                    <div class="checkbox-group">
                        <input type="checkbox" id="enableNotifications">
                        <label for="enableNotifications">Ativar lembretes</label>
                    </div>
                </div>

                <div class="form-group hidden" id="notificationSettings">
                    <label>Tipos de notifica√ß√£o:</label>
                    <div class="notification-types">
                        <div class="checkbox-group">
                            <input type="checkbox" id="emailNotif">
                            <label for="emailNotif">E-mail</label>
                        </div>
                        <div class="checkbox-group">
                            <input type="checkbox" id="whatsappNotif">
                            <label for="whatsappNotif">WhatsApp</label>
                        </div>
                    </div>
                    
                    <div class="form-group" style="margin-top: 15px;">
                        <label for="notifyBefore">Lembrar antes:</label>
                        <select id="notifyBefore">
                            <option value="5">5 minutos</option>
                            <option value="15">15 minutos</option>
                            <option value="30">30 minutos</option>
                            <option value="60" selected>1 hora</option>
                            <option value="1440">1 dia</option>
                        </select>
                    </div>

                    <div class="form-group" id="emailField" class="hidden">
                        <label for="email">E-mail:</label>
                        <input type="email" id="email" placeholder="seu@email.com">
                    </div>

                    <div class="form-group" id="phoneField" class="hidden">
                        <label for="phone">WhatsApp:</label>
                        <input type="tel" id="phone" placeholder="(11) 99999-9999">
                    </div>
                </div>

                <button type="submit" class="btn">Adicionar Evento</button>
            </form>
        </div>
    </div>

    <script>
        let currentDate = new Date();
        let selectedDate = null;
        let events = JSON.parse(localStorage.getItem('calendarEvents')) || [];

        const monthNames = [
            'Janeiro', 'Fevereiro', 'Mar√ßo', 'Abril', 'Maio', 'Junho',
            'Julho', 'Agosto', 'Setembro', 'Outubro', 'Novembro', 'Dezembro'
        ];

        const dayNames = ['Dom', 'Seg', 'Ter', 'Qua', 'Qui', 'Sex', 'Sab'];

        function initCalendar() {
            renderCalendar();
            renderEvents();
            setupEventListeners();
        }

        function renderCalendar() {
            const monthYear = document.getElementById('monthYear');
            const calendarGrid = document.getElementById('calendarGrid');
            
            monthYear.textContent = `${monthNames[currentDate.getMonth()]} ${currentDate.getFullYear()}`;
            
            calendarGrid.innerHTML = '';
            
            // Cabe√ßalho dos dias da semana
            dayNames.forEach(day => {
                const dayHeader = document.createElement('div');
                dayHeader.className = 'calendar-day-header';
                dayHeader.textContent = day;
                calendarGrid.appendChild(dayHeader);
            });

            // Primeiro dia do m√™s e √∫ltimo dia do m√™s anterior
            const firstDay = new Date(currentDate.getFullYear(), currentDate.getMonth(), 1);
            const lastDay = new Date(currentDate.getFullYear(), currentDate.getMonth() + 1, 0);
            const daysInMonth = lastDay.getDate();
            const startingDayOfWeek = firstDay.getDay();

            // Dias do m√™s anterior
            const prevMonth = new Date(currentDate.getFullYear(), currentDate.getMonth() - 1, 0);
            const daysInPrevMonth = prevMonth.getDate();
            
            for (let i = startingDayOfWeek - 1; i >= 0; i--) {
                const dayElement = createDayElement(daysInPrevMonth - i, true);
                calendarGrid.appendChild(dayElement);
            }

            // Dias do m√™s atual
            for (let day = 1; day <= daysInMonth; day++) {
                const dayElement = createDayElement(day, false);
                calendarGrid.appendChild(dayElement);
            }

            // Dias do pr√≥ximo m√™s para completar a grade
            const totalCells = 42; // 6 semanas x 7 dias
            const remainingCells = totalCells - (startingDayOfWeek + daysInMonth);
            for (let day = 1; day <= remainingCells && remainingCells < 7; day++) {
                const dayElement = createDayElement(day, true);
                calendarGrid.appendChild(dayElement);
            }
        }

        function createDayElement(day, isOtherMonth) {
            const dayElement = document.createElement('div');
            dayElement.className = 'calendar-day';
            if (isOtherMonth) dayElement.className += ' other-month';
            
            dayElement.textContent = day;
            
            if (!isOtherMonth) {
                const dayDate = new Date(currentDate.getFullYear(), currentDate.getMonth(), day);
                const dateString = dayDate.toISOString().split('T')[0];
                
                // Verificar se h√° eventos neste dia
                const hasEvent = events.some(event => event.date === dateString);
                if (hasEvent) {
                    dayElement.className += ' has-event';
                    const dot = document.createElement('div');
                    dot.className = 'event-dot';
                    dayElement.appendChild(dot);
                }
                
                dayElement.onclick = () => selectDate(dayDate);
            }
            
            return dayElement;
        }

        function selectDate(date) {
            selectedDate = date;
            document.getElementById('eventDate').value = date.toISOString().split('T')[0];
            
            // Destacar o dia selecionado
            document.querySelectorAll('.calendar-day').forEach(day => {
                day.classList.remove('selected');
            });
            event.target.classList.add('selected');
        }

        function previousMonth() {
            currentDate.setMonth(currentDate.getMonth() - 1);
            renderCalendar();
        }

        function nextMonth() {
            currentDate.setMonth(currentDate.getMonth() + 1);
            renderCalendar();
        }

        function renderEvents() {
            const eventsList = document.getElementById('eventsList');
            eventsList.innerHTML = '';

            if (events.length === 0) {
                eventsList.innerHTML = '<p style="text-align: center; color: #718096;">Nenhum evento cadastrado</p>';
                return;
            }

            // Ordenar eventos por data e hora
            const sortedEvents = events.sort((a, b) => {
                const dateA = new Date(`${a.date}T${a.time}`);
                const dateB = new Date(`${b.date}T${b.time}`);
                return dateA - dateB;
            });

            sortedEvents.forEach((event, index) => {
                const eventDate = new Date(`${event.date}T${event.time}`);
                const now = new Date();
                
                // Pular eventos passados
                if (eventDate < now) return;

                const eventElement = document.createElement('div');
                eventElement.className = 'event-item';
                
                const dateFormatted = eventDate.toLocaleDateString('pt-BR', {
                    weekday: 'long',
                    day: '2-digit',
                    month: 'long'
                });

                const timeFormatted = eventDate.toLocaleTimeString('pt-BR', {
                    hour: '2-digit',
                    minute: '2-digit'
                });

                eventElement.innerHTML = `
                    <button class="delete-btn" onclick="deleteEvent(${index})">√ó</button>
                    <div class="event-date">${dateFormatted}</div>
                    <div class="event-title">${event.title}</div>
                    <div class="event-time">üïí ${timeFormatted}</div>
                    ${event.description ? `<div style="color: #718096; margin-top: 5px;">${event.description}</div>` : ''}
                    ${event.image || event.audio ? `<div class="media-gallery">${renderEventMedia(event, index)}</div>` : ''}
                    ${event.notifications ? `
                        <div style="margin-top: 8px;">
                            ${event.notifications.email ? '<span class="event-notification">üìß E-mail</span>' : ''}
                            ${event.notifications.whatsapp ? '<span class="event-notification">üì± WhatsApp</span>' : ''}
                            <span class="event-notification">‚è∞ ${event.notifyBefore} min antes</span>
                        </div>
                    ` : ''}
                `;
                
                eventsList.appendChild(eventElement);
            });
        }

        function deleteEvent(index) {
            if (confirm('Tem certeza que deseja excluir este evento?')) {
                events.splice(index, 1);
                saveEvents();
                renderEvents();
                renderCalendar();
            }
        }

        function renderEventMedia(event, eventIndex) {
            let mediaHtml = '';
            
            if (event.image) {
                mediaHtml += `
                    <div class="media-thumbnail" onclick="openImageModal('${event.image}')">
                        <img src="${event.image}" alt="Imagem do evento">
                    </div>
                `;
            }
            
            if (event.audio) {
                mediaHtml += `
                    <div class="media-thumbnail" onclick="playAudio('${event.audio}')">
                        <div class="audio-icon">üéµ</div>
                    </div>
                `;
            }
            
            return mediaHtml;
        }

        function openImageModal(imageSrc) {
            // Criar modal para visualizar imagem
            const modal = document.createElement('div');
            modal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0,0,0,0.8);
                display: flex;
                justify-content: center;
                align-items: center;
                z-index: 1000;
                cursor: pointer;
            `;
            
            const img = document.createElement('img');
            img.src = imageSrc;
            img.style.cssText = `
                max-width: 90%;
                max-height: 90%;
                border-radius: 10px;
            `;
            
            modal.appendChild(img);
            document.body.appendChild(modal);
            
            modal.onclick = () => document.body.removeChild(modal);
        }

        function playAudio(audioSrc) {
            const audio = new Audio(audioSrc);
            audio.play();
        }

        function previewImage(event) {
            const file = event.target.files[0];
            const preview = document.getElementById('imagePreview');
            
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    preview.innerHTML = `
                        <img src="${e.target.result}" alt="Preview">
                        <button class="remove-media" onclick="removeImagePreview()">√ó</button>
                    `;
                    preview.classList.remove('hidden');
                };
                reader.readAsDataURL(file);
            }
        }

        function previewAudio(event) {
            const file = event.target.files[0];
            const preview = document.getElementById('audioPreview');
            
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    preview.innerHTML = `
                        <audio controls>
                            <source src="${e.target.result}" type="${file.type}">
                        </audio>
                        <button class="remove-media" onclick="removeAudioPreview()">√ó</button>
                    `;
                    preview.classList.remove('hidden');
                };
                reader.readAsDataURL(file);
            }
        }

        function removeImagePreview() {
            document.getElementById('eventImage').value = '';
            document.getElementById('imagePreview').innerHTML = '';
            document.getElementById('imagePreview').classList.add('hidden');
        }

        function removeAudioPreview() {
            document.getElementById('eventAudio').value = '';
            document.getElementById('audioPreview').innerHTML = '';
            document.getElementById('audioPreview').classList.add('hidden');
        }

        function saveEvents() {
            localStorage.setItem('calendarEvents', JSON.stringify(events));
        }

        function setupEventListeners() {
            // Toggle das configura√ß√µes de notifica√ß√£o
            document.getElementById('enableNotifications').addEventListener('change', function() {
                const notificationSettings = document.getElementById('notificationSettings');
                if (this.checked) {
                    notificationSettings.classList.remove('hidden');
                } else {
                    notificationSettings.classList.add('hidden');
                }
            });

            // Toggle dos campos de contato
            document.getElementById('emailNotif').addEventListener('change', function() {
                const emailField = document.getElementById('emailField');
                if (this.checked) {
                    emailField.classList.remove('hidden');
                } else {
                    emailField.classList.add('hidden');
                }
            });

            document.getElementById('whatsappNotif').addEventListener('change', function() {
                const phoneField = document.getElementById('phoneField');
                if (this.checked) {
                    phoneField.classList.remove('hidden');
                } else {
                    phoneField.classList.add('hidden');
                }
            });

            // Submit do formul√°rio
            document.getElementById('eventForm').addEventListener('submit', function(e) {
                e.preventDefault();
                addEvent();
            });
        }

        function addEvent() {
            const title = document.getElementById('eventTitle').value;
            const date = document.getElementById('eventDate').value;
            const time = document.getElementById('eventTime').value;
            const description = document.getElementById('eventDescription').value;
            const enableNotifications = document.getElementById('enableNotifications').checked;
            const imageFile = document.getElementById('eventImage').files[0];
            const audioFile = document.getElementById('eventAudio').files[0];

            const newEvent = {
                title,
                date,
                time,
                description,
                created: new Date().toISOString()
            };

            // Processar imagem
            if (imageFile) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    newEvent.image = e.target.result;
                    processEvent();
                };
                reader.readAsDataURL(imageFile);
            } else if (audioFile) {
                // Se n√£o h√° imagem, processar √°udio
                const reader = new FileReader();
                reader.onload = function(e) {
                    newEvent.audio = e.target.result;
                    processEvent();
                };
                reader.readAsDataURL(audioFile);
            } else {
                processEvent();
            }

            function processEvent() {
                // Processar √°udio se ainda n√£o foi processado e existe
                if (audioFile && !newEvent.audio) {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        newEvent.audio = e.target.result;
                        finalizeEvent();
                    };
                    reader.readAsDataURL(audioFile);
                } else {
                    finalizeEvent();
                }
            }

            function finalizeEvent() {
                if (enableNotifications) {
                    const emailNotif = document.getElementById('emailNotif').checked;
                    const whatsappNotif = document.getElementById('whatsappNotif').checked;
                    const notifyBefore = parseInt(document.getElementById('notifyBefore').value);
                    const email = document.getElementById('email').value;
                    const phone = document.getElementById('phone').value;

                    newEvent.notifications = {
                        email: emailNotif,
                        whatsapp: whatsappNotif,
                        emailAddress: email,
                        phoneNumber: phone
                    };
                    newEvent.notifyBefore = notifyBefore;

                    // Simular agendamento de notifica√ß√£o
                    scheduleNotification(newEvent);
                }

                events.push(newEvent);
                saveEvents();
                renderEvents();
                renderCalendar();

                // Limpar formul√°rio
                document.getElementById('eventForm').reset();
                document.getElementById('notificationSettings').classList.add('hidden');
                document.getElementById('emailField').classList.add('hidden');
                document.getElementById('phoneField').classList.add('hidden');
                document.getElementById('imagePreview').classList.add('hidden');
                document.getElementById('audioPreview').classList.add('hidden');
                document.getElementById('imagePreview').innerHTML = '';
                document.getElementById('audioPreview').innerHTML = '';

                alert('Evento adicionado com sucesso!');
            }
        }

        function scheduleNotification(event) {
            const eventDateTime = new Date(`${event.date}T${event.time}`);
            const notificationTime = new Date(eventDateTime.getTime() - (event.notifyBefore * 60 * 1000));
            const now = new Date();

            if (notificationTime > now) {
                const timeUntilNotification = notificationTime.getTime() - now.getTime();
                
                setTimeout(() => {
                    showNotification(event);
                }, timeUntilNotification);

                console.log(`Notifica√ß√£o agendada para: ${notificationTime.toLocaleString('pt-BR')}`);
            }
        }

        function showNotification(event) {
            // Verificar se o navegador suporta notifica√ß√µes
            if ('Notification' in window) {
                if (Notification.permission === 'granted') {
                    new Notification(`üîî Lembrete: ${event.title}`, {
                        body: `Seu evento come√ßa em ${event.notifyBefore} minutos!`,
                        icon: 'üìÖ'
                    });
                } else if (Notification.permission !== 'denied') {
                    Notification.requestPermission().then(permission => {
                        if (permission === 'granted') {
                            new Notification(`üîî Lembrete: ${event.title}`, {
                                body: `Seu evento come√ßa em ${event.notifyBefore} minutos!`,
                                icon: 'üìÖ'
                            });
                        }
                    });
                }
            }

            // Simular envio de notifica√ß√µes
            if (event.notifications) {
                if (event.notifications.email && event.notifications.emailAddress) {
                    console.log(`üìß E-mail enviado para: ${event.notifications.emailAddress}`);
                    alert(`üìß E-mail de lembrete seria enviado para: ${event.notifications.emailAddress}`);
                }

                if (event.notifications.whatsapp && event.notifications.phoneNumber) {
                    console.log(`üì± WhatsApp enviado para: ${event.notifications.phoneNumber}`);
                    alert(`üì± Mensagem de WhatsApp seria enviada para: ${event.notifications.phoneNumber}`);
                }
            }
        }

        // Verificar notifica√ß√µes pendentes a cada minuto
        setInterval(() => {
            const now = new Date();
            events.forEach(event => {
                if (event.notifications) {
                    const eventDateTime = new Date(`${event.date}T${event.time}`);
                    const notificationTime = new Date(eventDateTime.getTime() - (event.notifyBefore * 60 * 1000));
                    
                    // Verificar se √© hora da notifica√ß√£o (com margem de 30 segundos)
                    if (Math.abs(now.getTime() - notificationTime.getTime()) < 30000 && !event.notificationSent) {
                        showNotification(event);
                        event.notificationSent = true;
                        saveEvents();
                    }
                }
            });
        }, 60000); // Verificar a cada minuto

        // Solicitar permiss√£o para notifica√ß√µes ao carregar a p√°gina
        if ('Notification' in window && Notification.permission === 'default') {
            Notification.requestPermission();
        }

        // Definir data padr√£o como hoje
        document.getElementById('eventDate').value = new Date().toISOString().split('T')[0];

        // Inicializar calend√°rio
        initCalendar();
    </script>
</body>
</html>
